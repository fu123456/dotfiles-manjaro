# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
#
# Should you change your keyboard layout somewhen, delete
# this file and re-run i3-config-wizard(1).
#

# i3 config file (v4)
#
# Please see http://i3wm.org/docs/userguide.html for a complete reference!

set $mod Mod4
set $base00 #101218
set $base01 #1f222d
set $base02 #252936
set $base03 #7780a1
set $base04 #C0C5CE
set $base05 #d1d4e0
set $base06 #C9CCDB
set $base07 #ffffff
set $base08 #ee829f
set $base09 #f99170
set $base0A #ffefcc
set $base0B #a5ffe1
set $base0C #97e0ff
set $base0D #97bbf7
set $base0E #c0b7f9
set $base0F #fcc09e
# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below. ISO 10646 = Unicode
# font -misc-fixed-medium-r-normal--13-120-75-75-C-70-iso10646-1
# font -wenquanyi-wenquanyi bitmap song-medium-r-normal--12-120-75-75-p-119-iso10646-1

# font xft:DejaVu Sans Mono 10
# font xft:monospace 10
# The font above is very space-efficient, that is, it looks good, sharp and
# clear in small sizes. However, if you need a lot of unicode glyphs or
# right-to-left text rendering, you should instead use pango for rendering and
# chose a FreeType font, such as:
# font pango:DejaVu Sans Mono 10
# font pango:UbuntuMono-regular 10
# font pango:System San Francisco Display 10
# font pango:Ubuntu Mono 10
font pango:DejaVu 11

# font setting by fugang
font -misc-fixed-medium-r-normal--13-120-75-75-C-70-iso10646-1
font xft:Wen Quan Yi Zen Hei Mono 10
font pango:DejaVu Sans Mono, Terminus Bold Semi-Condensed 11
font pango:Terminus 11px

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# 自定义
# 无边框：$mod+u
# 普通模式：$mod+t
bindsym $mod+t border normal
bindsym $mod+u border none
# 自动把打开的程序放到指定工作区
# assign [class="(?i)firefox"] → 1
# assign [class="(?i)emacs"] → 2
# assign [class="(?i)amule"] → 3

# 暂存器使用
# mod shift -  隐藏当前窗口
# mod -	       现实第一个暂存的窗口
bindsym $mod+Shift+minus move scratchpad
bindsym $mod+minus scratchpad show

#i3bar control
# Toggle between hide state and show state
# bindsym $mod+m bar hidden_state toggle
# Toggle between dock mode and hide mode
bindsym $mod+m bar mode toggle

bindsym $mod+d exec rofi -show run
bindsym $mod+n exec rofi -show window

# start a terminal
bindsym $mod+Return exec i3-sensible-terminal

# kill focused window
# bindsym $mod+Shift+q kill
bindsym $mod+q kill

# start dmenu (a program launcher)
# bindsym $mod+d exec dmenu_run
# There also is the (new) i3-dmenu-desktop which only displays applications
# shipping a .desktop file. It is a wrapper around dmenu, so you need that
# installed.
# bindsym $mod+d exec --no-startup-id i3-dmenu-desktop

# change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# alternatively, you can use the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

# alternatively, you can use the cursor keys:
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# split in horizontal orientation
# bindsym $mod+h split h

# split in vertical orientation
# bindsym $mod+v split v

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen

# change container layout (stacked, tabbed, toggle split)
# this setting is very useful
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split
# presentation
bindsym $mod+x move container to output ePD-1
# border setting

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# focus the parent container
bindsym $mod+a focus parent

# toggle sticky
bindsym $mod+Shift+s sticky toggle

# focus the child container
bindsym $mod+c focus child

#navigate workspaces next / previous
bindsym $mod+Ctrl+l workspace next
bindsym $mod+Ctrl+h workspace prev

# These are more like the tmux config we will get to later, but are intuitive
bindsym $mod+[ split horizontal
bindsym $mod+backslash  split horizontal
bindsym $mod+bar        split horizontal
bindsym $mod+apostrophe split vertical
bindsym $mod+quotedbl   split vertical

# Lock screen
bindsym $mod+9 exec --no-startup-id blurlock

# Workspace names
# to display names or symbols instead of plain workspace numbers you can use
# something like: set $ws1 1:mail
#                 set $ws2 2:
# my workspace setting
set $wsterm    1:Term
set $wsemacs   2:Emacs
set $wsdoc 3:Document
set $wsbrowser  4:Browser
set $wsTexmacs 5:Texmacs
set $wsPresentation 6:Presentation
set $wsOther 7:Other
set $wsmedia 8:Media
# set $wspresentaion 9:Presentation
# set $wsother 0:Other

workspace "$wsterm" output $sidescreen
workspace "$wsemacs" output $mainscreen
workspace "$wsdoc" output $mainscreen
workspace "$wsbrowser" output $mainscreen
workspace "$wsTexmacs" output $mainscreen
workspace "$wsPresentation" output $mainscreen
workspace "$wsOther" output $mainscreen
workspace "$wsmedia" output $mainscreen
# workspace "$wspresentaion" output $mainscreen
# workspace "$wsother" output $mainscreen

# switch to workspace
#workspace_layout tabbed
bindsym $mod+1 workspace $wsterm
bindsym $mod+2 workspace $wsemacs
bindsym $mod+3 workspace $wsdoc
bindsym $mod+4 workspace $wsbrowser
bindsym $mod+5 workspace $wsTexmacs
bindsym $mod+6 workspace $wsPresentation
bindsym $mod+7 workspace $wsOther
bindsym $mod+8 workspace $wsmedia

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace $wsterm
bindsym $mod+Shift+2 move container to workspace $wsemacs
bindsym $mod+Shift+3 move container to workspace $wsdoc
bindsym $mod+Shift+4 move container to workspace $wsbrowser
bindsym $mod+Shift+5 move container to workspace $wsTexmacs
bindsym $mod+Shift+6 move container to workspace $wsPresentation
bindsym $mod+Shift+7 move container to workspace $wsOther
bindsym $mod+Shift+8 move container to workspace $wsmedia

# assign specific windows to workspaces
# nautilus
assign [class="^Firefox$"] → $wsbrowser
for_window [class = "^Firefox"] layout tabbed focus
assign [class="^Waterfox$"] → $wsbrowser
for_window [class = "^Waterfox"] layout tabbed focus
assign [class="^Palemoon$"] → $wsbrowser
for_window [class = "^Palemoon"] layout tabbed focus
assign [class="^Google-chrome$"] → $wsbrowser
for_window [class = "^Google-chrome"] layout tabbed focus
assign [class="^Gnome-terminal$"] → $wsterm
assign [class="^terminal$"] → $wsterm
assign [class="^Terminal$"] → $wsterm
assign [class="^xterm$"] → $wsterm
assign [class="^Xterm$"] → $wsterm
assign [class="^urxvt$"] → $wsterm
assign [class="^URxvt$"] → $wsterm
assign [class="^myterm$"] → $wsterm
assign [class="^xdg-open$"] → $wsfile
assign [class="^Nautilus$"] → $wsfiles
assign [class="^Impressive$"] → $wsPresentation
assign [class="^impressive$"] → $wsPresentation
assign [class="^Imp$"] → $wsPresentaion
assign [class="^MEGAsync$"] → $wsmedia
assign [class="^Inkscape"] → $wsmedia
assign [class="^Texmacs"] → $wsTexmacs
assign [class="^texmacs"] → $wsTexmacs
assign [class="^Gimp"] → $wsmedia
assign [class="^Teamviewer"] → $wsmedia
#Shadowsocks-Qt5, Ss-qt5, does not work
assign [class="^shadowsocks-qt5"] → $wsmedia
assign [class="^Anydesk"] → $wsmedia
assign [class="^Virt-manager"] → $wsmedia
assign [class="^Zathura$"] $wsdoc
for_window [class = "^Zathura$"] layout tabbed focus
assign [class="^llpp$"] $wsdoc
for_window [class = "^llpp$"] layout tabbed focus
# Evince
assign [class="^Evince"] $wsdoc
for_window [class = "^Evince"] layout tabbed focus
# Shutter
assign [class="^Shutter"] $wsmedia
for_window [class = "^Shutter"] layout tabbed focus
# Vmplayer
assign [class="^Vmplayer"] $wsmedia
for_window [class = "^Vmplayer"] layout tabbed
# pcmanfm
assign [class="^Pcmanfm$"] $wsPresentation
for_window [class = "^Pcmanfm"] layout tabbed focus
# xournal
assign [class="^Xournal"] $wsdoc
for_window [class = "^Xournal"] #layout tabbed
# goldendict
assign [class="^GoldenDict"] $wsemacs
for_window [class = "^GoldenDict"] #layout tabbed
# epdfview
assign [class="^Epdfview$"] $wsdoc
for_window [class = "^Epdfview$"] #layout tabbed
# Emacs
assign [class="^Emacs$"] $wsemacs
for_window [class="^Emacs$"] layout tabbed focus
# inkscape
assign [class="^Inkscape$"] $wsmedia
for_window [class="^Inkscape$"] #layout tabbed
# gimp
assign [class="^Gimp$"] $wsmedia
for_window [class="^Gimp$"] $wsmedia
# mpv
for_window [class="mpv"] floating enable, resize set 840 410
# smplayer
assign [class="^Smplayer$"] → $wsmedia
for_window [class="^Smplayer$"] floating enable, resize set 840 410
# inkscape
assign [class="^Inkscape$"] $wsmedia
for_window [class="^Inkscape$"] #layout tabbed
# Viewnior
for_window [class="^Viewnior"] floating enable
# Eog
for_window [class="^Eog"] floating enable

assign [class="^ANYDESK$"] $wsmedia
for_window [class="^ANYDESK$"]medias

assign [class="(?!)electronic-wechat"] $wsmedia
for_window [class="(?i)electronic-wechat"] floating enable border normal

assign [class="^VMware Player$"] →  $wsmedia

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# {{{ Matlab window
for_window [class="mlterm" instance="mlterm"] floating disable
for_window [class="com-mathworks-.*" instance="sun-awt-X11-XFramePeer"] #floating enable
for_window [class="MATLAB.*" instance="sun-awt-X11-XFramePeer"] #floating enable
for_window [class="MATLAB.*" instance="sun-awt-X11-XWindowPeer"] #floating enable
assign [class="MATLAB.*"] $wsmedia
for_window [class="MATLAB.*"] layout tabbed
assign [class="com-mathworks-util-PostVMInit" title="^Fig"] $wsmedia
# }}}

# {{{ my startup setting
# add your command lines according to your needs
exec --no-startup-id fcitx
exec /home/fg/MEGA/dotfiles-manjaro/scripts/startupStuff.sh &
# }}}

# {{ emacs anywhere
bindsym $mod+p exec /home/fg/.emacs_anywhere/bin/run
# }}

# switch between the current and the previously focused one
bindsym $mod+b workspace back_and_forth
bindsym $mod+Shift+b move container to workspace back_and_forth

# reload the configuration file
bindsym $mod+Shift+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart
# exit i3 (logs you out of your X session)
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"
bindsym $mod+Shift+x exec i3lock --color "$base01"
# matlab setting
assign [class="com-mathworks-util-PostVMInit" title="^Fig"] 0

#bindsym $mod+m exec /usr/local/MATLAB/R2014b/bin/matlab

# resize window (you can also use the mouse for that)
mode "resize" {
        # These bindings trigger as soon as you enter the resize mode

        # Pressing left will shrink the window’s width.
        # Pressing right will grow the window’s width.
        # Pressing up will shrink the window’s height.
        # Pressing down will grow the window’s height.
        bindsym h resize shrink width 10 px or 10 ppt
        bindsym j resize grow height 10 px or 10 ppt
        bindsym k resize shrink height 10 px or 10 ppt
        # bindsym semicolon resize grow width 10 px or 10 ppt
        bindsym l resize grow width 10 px or 10 ppt

        # same bindings, but for the arrow keys
        bindsym Left resize shrink width 10 px or 10 ppt
        bindsym Down resize grow height 10 px or 10 ppt
        bindsym Up resize shrink height 10 px or 10 ppt
        bindsym Right resize grow width 10 px or 10 ppt

        # back to normal: Enter or Escape
        bindsym Return mode "default"
        bindsym Escape mode "default"
}

# Set shut down, restart and locking features
bindsym $mod+0 mode "$mode_system"
set $mode_system (l)ock, (e)xit, switch_(u)ser, (s)uspend, (h)ibernate, (r)eboot, (Shift+s)hutdown
mode "$mode_system" {
bindsym l exec --no-startup-id i3exit lock, mode "default"
bindsym s exec --no-startup-id i3exit suspend, mode "default"
bindsym u exec --no-startup-id i3exit switch_user, mode "default"
bindsym e exec --no-startup-id i3exit logout, mode "default"
bindsym h exec --no-startup-id i3exit hibernate, mode "default"
bindsym r exec --no-startup-id i3exit reboot, mode "default"
bindsym Shift+s exec --no-startup-id i3exit shutdown, mode "default"

# exit system mode: "Enter" or "Escape"
bindsym Return mode "default"
bindsym Escape mode "default"
}

bindsym $mod+r mode "resize"

################################################################################################
## sound-section - DO NOT EDIT if you wish to automatically upgrade Alsa -> Pulseaudio later! ##
################################################################################################

exec --no-startup-id volumeicon
bindsym $mod+Ctrl+m exec terminal -e 'alsamixer'

# fugang add
bindsym $mod+Ctrl+F3 exec amixer set Master 5%+
bindsym $mod+Ctrl+F2 exec amixer set Master 5%-
exec --no-startup-id pulseaudio --start
#exec --no-startup-id pa-applet
#bindsym $mod+Ctrl+m exec pavucontrol

################################################################################################

# Autostart applications
exec --no-startup-id /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec --no-startup-id nitrogen --restore; sleep 1; compton -b
#exec --no-startup-id manjaro-hello
exec --no-startup-id nm-applet
exec --no-startup-id xfce4-power-manager
exec --no-startup-id pamac-tray
exec --no-startup-id clipit
# exec --no-startup-id blueman-applet
# exec_always --no-startup-id sbxkb
exec --no-startup-id start_conky_maia
# exec --no-startup-id start_conky_green
exec --no-startup-id xautolock -time 20 -locker blurlock
exec_always --no-startup-id ff-theme-util
exec_always --no-startup-id fix_xcursor

# Color palette used for the terminal ( ~/.Xresources file )
# Colors are gathered based on the documentation:
# https://i3wm.org/docs/userguide.html#xresources
# Change the variable name at the place you want to match the color
# of your terminal like this:
# [example]
# If you want your bar to have the same background color as your
# terminal background change the line 362 from:
# background #14191D
# to:
# background $term_background
# Same logic applied to everything else.
set_from_resource $term_background background
set_from_resource $term_foreground foreground
set_from_resource $term_color0     color0
set_from_resource $term_color1     color1
set_from_resource $term_color2     color2
set_from_resource $term_color3     color3
set_from_resource $term_color4     color4
set_from_resource $term_color5     color5
set_from_resource $term_color6     color6
set_from_resource $term_color7     color7
set_from_resource $term_color8     color8
set_from_resource $term_color9     color9
set_from_resource $term_color10    color10
set_from_resource $term_color11    color11
set_from_resource $term_color12    color12
set_from_resource $term_color13    color13
set_from_resource $term_color14    color14
set_from_resource $term_color15    color15


# Pulse Audio controls
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume 0 +5% #increase sound volume
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume 9 -5% #decrease sound volume
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute 7 toggle # mute sound

# bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume 0 -- +10% && killall -SIGUSR1 i3status
# bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume 0 -- -10% && killall -SIGUSR1 i3status

# Screen brightness controls
bindsym XF86MonBrightnessUp exec xbacklight -inc 20 # increase screen brightness
bindsym XF86MonBrightnessDown exec xbacklight -dec 20 # decrease screen brightness

# Media player controls
bindsym XF86AudioPlay exec playerctl play
bindsym XF86AudioPause exec playerctl pause
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPrev exec playerctl previous

# Fix Nautilius issue on Ubuntu
exec_always gsettings set org.gnome.desktop.background show-desktop-icons false
exec_always gsettings set org.nemo.desktop show-desktop-icons false

exec_always compton -f

# wallpaper
exec --no-startup-id feh --bg-fill /home/fg/MEGA/dotfiles-manjaro/wallpapers/i3wm.jpg
# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)
bar {
	# position top
	position bottom
        status_command conky -c ~/.conkyrc
    colors {
        background #555555
        statusline #ffffff
        focused_workspace  #4c7899 #285577 #ffffff
        active_workspace   #333333 #5f676a #ffffff
        inactive_workspace #333333 #222222 #888888
        urgent_workspace   #2f343a #900000 #ffffff
    }


}
